# Base64

`Base64`就是选出64个字符
+ 小写字母a-z
+ 大写字母A-Z
+ 数字0-9
+ 符号"+"、"/"，再加上作为垫字的"="
将以上字符作为一个基本字符集，然后，其他所有符号都转换成这个字符集中的符号

具体的转换步骤可以分为四步：
1. 将每三个字节作为一组，一共是24个二进制位
2. 将这24个二进制位分为四组，每个组有6个二进制位
3. 在每组前面加两个`00`，总共扩展成32个二进制位，即四个字节
4. 根据下表，得到扩展后的每个字节对应的符号，形成`Base64`编码值
对应表：
0   -> A      16  -> Q      32  -> g      48  -> w      
1   -> B      17  -> R      33  -> h      49  -> x
2   -> C      18  -> S      34  -> i      50  -> y
3   -> D      19  -> T      35  -> j      51  -> z
4   -> E      20  -> U      36  -> k      52  -> 0
5   -> F      21  -> V      37  -> l      53  -> 1
6   -> G      22  -> W      38  -> m      54  -> 2
7   -> H      23  -> X      39  -> n      55  -> 3
8   -> I      24  -> Y      40  -> o      56  -> 4
9   -> J      25  -> Z      41  -> p      57  -> 5
10  -> k      26  -> a      42  -> q      58  -> 6
11  -> L      27  -> b      43  -> r      59  -> 7
12  -> M      28  -> c      44  -> s      60  -> 8
13  -> N      29  -> d      45  -> t      61  -> 9
14  -> O      30  -> e      46  -> u      62  -> +
15  -> P      31  -> f      47  -> v      63  -> /

因为，`Base64`将三个字节转化成四个字节，银次`Base64`编码后的文本，会比原文本大出三分之一左右

举例，演示`Man`是如何转成`Base64`编码
Text Content          M                   a                     n
ASCII                 77                  97                    110
Bit pattern           |0|1|0|0|1|1|0|1|   |0|1|1|0|0|0|0|1|     |0|1|1|0|1|1|1|0|
Index                 |19         |22             |5                |46         |
Base64-Encoded        |T          |W              |F                |u      

1. "M","a","n"的`ASCII`值分别是77、97、110，对应的二进制值分别是`01001101`、`01100001`、`01101110`，将他们连成一个24位的二进制字符串`010011010110000101101110`
2. 将24位的二进制字符串分成4组，每组6个二进制位:`010011`,`010110`,`000101`,`101110`
3. 在每组前面加`00`，扩展成32个二进制位，即四字节：`00010011`,`00010110`,`00000101`,`00101110`,他们对应的十进制分别是19,22,5,56
4. 根据查询表，得到每个十进制值对应的`Base64`编码，即`T、W、F、u`,因此，`Man`的`Base64`编码就是`TWFu`

**NOTE:**
如果字节数不足三，处理规则是：
1. 两个字节：将这两个字节一共16个二进制位，按照上面的规则，转成三组，最后一组先在最后加`00`，之后给每个分组前面加`00`,然后按照上面的规则进行转换得到`Base64`编码，最后在得到的`Base64`编码后面加一个`=`
> 比如， `Ma`这两个字节，可以转化成三组`00010011`,`00010110`,`00000100`，对应的`Base64`的值是`T、W、E`，再补上一个`=`号，所以`Ma`的`Base64`编码就是`TWE=`

2. 一个字节：将这一个字节的8个二进制位，首先转成两组，第一组6位，第二组只有2位，所以先在末尾加上4个0，之后给每组前面加上00，之后按照上面的规则得到`Base64`编码，最后在末尾加上`==`
> 比如， `M`这个字节，可以分为两组`00010011`, `00010000`，对应的`Base64`值是`T, Q`,再补上两个`=`号，因此，`M`的`Base64`编码就是`TQ==`

3. 汉字是如何转化成`Base64`编码。汉字本身有多种编码如`gb2312,utf-8,gbk`等，每一种编码的`Base64`对应值不一样，以`utf-8`为例说明，“严”的`utf-8`编码为`E4B8A5`，写成二进制是三字节的`11100100、10111000、10100101`（一个汉字对应三个字节），将这24位按照之前的规则转换成32位`00111001 00001011 00100010 00100101`，则对应的`Base64`的值是`5、L、i、l`，所以“严”在`utf-8`模式下的`Base64`编码是`5Lil`
