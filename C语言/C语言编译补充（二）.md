# C语言编译补充（二）

## 连接器选项（Linker Option）
**下面的选项用于编译器连接目标文件，输出可执行文件的时候，如果编译器不进行连接，他们就毫无意义**

### object-file-name
+ 如果某些文件没有特别明确的后缀`a`,`GCC`救人为他们是库文件或目标文件（根据文件内容，连接器能够区分目标文件和库文件）。如果GCC执行连接操作，这些目标文件将成为连接器的输入文件

### -llibrary
+ 连接名为`library`的库文件
+ 连接器在标准搜索目录中寻找这个库文件，库真正的名字是`liblibrary.a`，连接器会当做文件名得到准确说明一样引用这个文件
+ 搜索目录除了一些系统标准目录外，还包括用户以`-L`选项指定的路径
+ 一般来说用这个方法找到得文件是库文件---即由目标文件`.o`组成的归档文件`.a`，连接器处理归档文件的方法是：扫描归档文件,寻找某些成员,这些成员的符号目前已被引用,不过还没有被定义，但是,如果连接器找到普通的目标文件,而不是库文件,就把这个目标文件按平常方式连接进来.指定`-l`选项和指定文件名的唯一区别是, `-l`选项用`lib`和`.a`把library包裹起来,而且搜索一些目录

### -lobjc
+ 这个-l选项的特殊形式用于连接`Object C`程序

### -nostartfiles
+ 不连接系统标准启动文件，而标准库文件仍然正常使用

### -nostdlib
+ 不连接系统标准启动文件和标准文件，只把指定的文件传递给连接器

### -static
+ 在支持动态连接的系统上,阻止连接共享库，该选项在其他系统上无效

### -shared
+ 生成一个共享目标文件，该文件可以和其他目标文件连接产生可执行文件，只有部分系统支持该选项

### -symbolic
+ 建立共享目标文件的时候，把引用绑定到全局符号上，对所有无法解析的引用做出警告（除非用连接编辑选项`-Xlinker -z -Xlinker defs`取代），只有部分系统支持该选项

### -Xlinker option
+ 把选项`option`传递给连接器，可以用他传递系统特定的连接选项，　`GNU CC`无法识别这些选项
+ 如果需要传递携带参数的选项，你必须使用两次`-Xlinker`，一次传递选项，另一次传递它的参数，例如，如果传递`-assert definitions`,必须写成`-Xlinker -assert -Xlinker definitions`

### -Wl, option
+ 把选项`option`传递给连接器，如果`option`中含有逗号，就在逗号处分割成多个选项

### -u symbol
+ 使连接器认为取消了`symbol`的符号定义,从而连接库模块以取得定义
+ 可以使用多个`-u`选项，各自跟上不同的符号，使得连接器调入附加的库模块


## 目录选项(Directory Option)
**下列选项指定搜索路径,用于查找头文件，库文件，或编译器的某些成员：**

### -Idir
+ 在头文件的搜索路径列表中添加`dir`目录

### -I-
+ 任何在`-I-`前面用`-I`选项指定的搜索路径只适用于`#include "file"`这种情况，他们不能用来搜索`#include <file>`包含的头文件
+ 如果用`-I`选项指定的搜索路径位于`-I-`后面，就可以在这些路径种搜索所有的`#include`指令，一般来说.`-I`就是这么用的
+ 还有，`-I-`选项能够阻止当前目录成为搜索`#include "file"`的第一选择，没有办法克服`-I-`选项的这个效应
+ `-I-`不影响使用系统标准目录，`-I-`和`-nostdinc`是不同的选项

### -Ldir
+ 在`-l`选项的搜索路径列表中添加`dir`目录

### -Bprefix
+ 这个选项指出在何处寻找可执行文件,库文件,以及编译器自己的数据文件.
+ 编译器驱动程序需要执行某些下面的子程序: `cpp`, `cc1` (或C++的 `cc1plus`), `as`和`ld`.他把`prefix`当作欲执行的程序的前缀,既可以包括也可以不包括`machine/version/`
+ 对于要运行的子程序,编译器驱动程序首先试着加上`-B`前缀(如果存在).如果没有找到文件,或没有指定 `-B`选项,编译器接着会试验两个标准前缀`/usr/lib/gcc/`和 `/usr/local/lib/gcc-lib/`.如果仍然没能够找到所需文件,编译器就在`PATH`环境变量 指定的路径中寻找没加任何前缀的文件名
+ 如果有需要,运行时(run-time)支持文件`libgcc.a`也在`-B`前缀的搜索范围之内. 如果这里没有找到,就在上面提到的两个标准前缀中寻找,仅此而已.如果上述方法没有找到这个文件,就不连接他了,多数 情况的多数机器上, `libgcc.a`并非必不可少
+ 你可以通过环境变量GCC_EXEC_PREFIX获得近似的效果;如果定义了这个变量,其值就和上面说的 一样用做前缀.如果同时指定了`-B`选项和GCC_EXEC_PREFIX变量,编译器首先使用 `-B`选项,然后才尝试环境变量值.
